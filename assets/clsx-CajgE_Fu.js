import{r as i,u as se,a as oe,b as H,d as le,f as ie,g as K,h as ce,i as ue,k as de,l as U,m as fe}from"./index-DMZEH2NY.js";const he="Error preloading route! ☝️";function pe(e,s){const t=se(),[r,c]=i.useState(!1),v=i.useRef(!1),u=oe(s),{activeProps:y=()=>({className:"active"}),inactiveProps:q=()=>({}),activeOptions:l,to:g,preload:I,preloadDelay:B,replace:O,startTransition:V,resetScroll:W,viewTransition:$,children:M,target:h,disabled:o,style:b,className:T,onClick:P,onFocus:k,onMouseEnter:S,onMouseLeave:x,onTouchStart:E,ignoreBlocker:G,...J}=e,{params:ve,search:ye,hash:ge,state:be,mask:Te,...w}=J,F=i.useMemo(()=>{try{return new URL(`${g}`),"external"}catch{}return"internal"},[g]),Q=H({select:a=>a.location.search,structuralSharing:!0});e={from:le({strict:!1,select:a=>a.pathname}),...e};const d=i.useMemo(()=>t.buildLocation(e),[t,e,Q]),p=i.useMemo(()=>I??t.options.defaultPreload,[t.options.defaultPreload,I]),X=B??t.options.defaultPreloadDelay??0,R=H({select:a=>{if(l!=null&&l.exact){if(!ie(a.location.pathname,d.pathname,t.basepath))return!1}else{const n=K(a.location.pathname,t.basepath).split("/");if(!K(d.pathname,t.basepath).split("/").every((re,ne)=>re===n[ne]))return!1}return((l==null?void 0:l.includeSearch)??!0)&&!ce(a.location.search,d.search,{partial:!(l!=null&&l.exact),ignoreUndefined:!(l!=null&&l.explicitUndefined)})?!1:l!=null&&l.includeHash?a.location.hash===d.hash:!0}}),f=i.useCallback(()=>{t.preloadRoute(e).catch(a=>{console.warn(a),console.warn(he)})},[e,t]),Y=i.useCallback(a=>{a!=null&&a.isIntersecting&&f()},[f]);if(ue(u,Y,{rootMargin:"100px"},{disabled:!!o||p!=="viewport"}),de(()=>{v.current||!o&&p==="render"&&(f(),v.current=!0)},[o,f,p]),F==="external")return{...w,ref:u,type:F,href:g,...M&&{children:M},...h&&{target:h},...o&&{disabled:o},...b&&{style:b},...T&&{className:T},...P&&{onClick:P},...k&&{onFocus:k},...S&&{onMouseEnter:S},...x&&{onMouseLeave:x},...E&&{onTouchStart:E}};const Z=a=>{if(!o&&!me(a)&&!a.defaultPrevented&&(!h||h==="_self")&&a.button===0){a.preventDefault(),fe.flushSync(()=>{c(!0)});const n=t.subscribe("onResolved",()=>{n(),c(!1)});t.buildAndCommitLocation({...e,replace:O,resetScroll:W,startTransition:V,viewTransition:$,ignoreBlocker:G})}},A=a=>{o||p&&f()},ee=A,te=a=>{if(o)return;const n=a.target||{};if(p){if(n.preloadTimeout)return;n.preloadTimeout=setTimeout(()=>{n.preloadTimeout=null,f()},X)}},ae=a=>{if(o)return;const n=a.target||{};n.preloadTimeout&&(clearTimeout(n.preloadTimeout),n.preloadTimeout=null)},m=a=>n=>{var _;(_=n.persist)==null||_.call(n),a.filter(Boolean).forEach(z=>{n.defaultPrevented||z(n)})},L=R?U(y,{})??{}:{},C=R?{}:U(q,{}),D=[T,L.className,C.className].filter(Boolean).join(" "),N={...b,...L.style,...C.style};return{...w,...L,...C,href:o?void 0:d.maskedLocation?t.history.createHref(d.maskedLocation.href):t.history.createHref(d.href),ref:u,onClick:m([P,Z]),onFocus:m([k,A]),onMouseEnter:m([S,te]),onMouseLeave:m([x,ae]),onTouchStart:m([E,ee]),disabled:!!o,target:h,...Object.keys(N).length&&{style:N},...D&&{className:D},...o&&{role:"link","aria-disabled":!0},...R&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}const Se=i.forwardRef((e,s)=>{const{_asChild:t,...r}=e,{type:c,ref:v,...u}=pe(r,s),y=typeof r.children=="function"?r.children({isActive:u["data-status"]==="active"}):r.children;return typeof t>"u"&&delete u.disabled,i.createElement(t||"a",{...u,ref:v},y)});function me(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function j(e){var s,t,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(s=0;s<c;s++)e[s]&&(t=j(e[s]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function xe(){for(var e,s,t=0,r="",c=arguments.length;t<c;t++)(e=arguments[t])&&(s=j(e))&&(r&&(r+=" "),r+=s);return r}export{Se as L,xe as c};
